<!DOCTYPE html>
<html lang="en">
<head>
<!--DEV-ONLY-NOT-LOADED-DURING-RUNTIME-->
<link href="../common/style/bootstrap.css" rel="stylesheet">
<link href="../common/style/style.css" rel="stylesheet">
<!--[onshow;block=head;when [visible.foo] == bar;comm]-->
<!--DEV-ONLY-NOT-LOADED-DURING-RUNTIME-->
</head>
<!--HEAD - ONLOAD-->
<!--[onload;file=../common/common.head.html;getbody;comm]-->
<!--HEAD - ONLOAD-->
<body>
<!--JS SECTION - ONLOAD-->
<!--[onload;file=../common/common.javascript.html;getbody;comm]-->
<!--JS SECTION - ONLOAD-->
<!--DEBUG SECTION - ONLOAD-->
<!--[onload;file=../common/include.debug.html;getbody;comm]-->
<!--DEBUG SECTION - ONLOAD-->
<!--HEADER SECTION - ONLOAD-->
<!--[onload;file=common.header.html;getbody;comm]-->
<!--HEADER SECTION - ONLOAD-->
<!-- Main content starts -->
<div class="content">
  <!-- Sidebar ends -->
  <div class="mainbar">
    <!----------------------COMMON PAGE HEADING--------------------------------->
    <!--[onload;file=common.heading.html;getbody;comm]-->
    <!----------------------COMMON PAGE HEADING--------------------------------->
    <div class="matter">
      <!---->
      <div class="row fullscreen-mode">
          <div class="col-md-12">
            <div class="widget">
              <div class="widget-head-light">
                <div class="pull-left">
                  <div class="bns-info-div pull-left">
                    <i class="icon-list"></i> Developer Invoice</div>
                </div>
                <div class="clearfix"></div>
              </div>
              <div class="widget-content">
                <style type="text/css">
                  .underlined{
                    text-decoration: underline;
                  }
                </style>
                <table class="table table-bordered table-forms">
                    <tbody>
                      <tr>
                        <td>Team Member</td>
                        <td>[vars.invoiceteammember]</td>
                      </tr>
                      <tr>
                        <td>Invoice ID</td>
                        <td>#[vars.invoiceid]</td>
                      </tr>

                      <tr>
                        <td> Invoice Total</td>
                        <td>$[vars.invoiceamount] USD</td>
                      </tr>
                      <tr>
                        
                        <td> Invoice Time</td>
                        <td>[vars.invoicetime] Hours</td>
                      </tr>

                      <tr>
                        
                        <td> Invoice Details</td>
                        <td>[vars.invoicedetails]</td>
                      </tr>

                      <tr>
                        
                        <td> Invoice Date</td>
                        <td>[vars.invoicedate]</td>
                      </tr>

                      <tr>
                        
                        <td> Invoice Status</td>
                        <td>[vars.invoicestatus]</td>
                      </tr>
                      
                      <tr>
                        <td></td>
                        <!--Update the invoice status in the db and then this will be done.-->
                        <td><button id="invoicepending" class="btn btn-primary">Invoice Pending Approval</button>  <button id="invoiceapproved" class="btn btn-primary">Invoice Approved</button>  <button id="invoicepaid" class="btn btn-primary">Invoice Paid</button></td>
                      </tr>
                      
                    </tbody>
                  </table>
                  <script type="text/javascript">
                    $(document).ready(function(){
                      $("#invoiceapproved").click(function(e){
                        $.ajax({
                          url: "http://pms.isodeveloper.com/__freshbooksapi/_developerinvoice.php?invoiceid=[vars.invoiceid]&newstatus=1"
                        }).done(function(e){
                          console.log(e);
                          alert('Invoice marked as "Approved, pending payment"');
                          location.href = location.href;
                        });
                      });

                      $("#invoicepaid").click(function(e){
                        $.ajax({
                          url: "http://pms.isodeveloper.com/__freshbooksapi/_developerinvoice.php?invoiceid=[vars.invoiceid]&newstatus=2"
                        }).done(function(e){
                          console.log(e);
                          alert('Invoice marked as "Paid"');
                          location.href = location.href;
                        });
                      });

                      $("#invoicepending").click(function(e){
                        $.ajax({
                          url: "http://pms.isodeveloper.com/__freshbooksapi/_developerinvoice.php?invoiceid=[vars.invoiceid]&newstatus=0"
                        }).done(function(e){
                          console.log(e);
                          alert('Invoice marked as "Pending Approval"');
                          location.href = location.href;
                        });
                      });
                    });
                  </script>
              </div>
            </div>
          <!--WI_INVOICE_ITEMS_TABLE-->
        </div>
      </div>
    </div>
  </div>
</div>
<!--------------------COMMON FOOTER JAVASCRIPT---------------------------->
<!--[onload;file=../common/common.footer.javascript.html;getbody;comm]-->
<!--------------------COMMON FOOTER JAVASCRIPT---------------------------->
		<!--WI_IFRAME_MODAL-->
		<div class="row">
			<div id="modalIframe" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
								x
							</button>
							<!--full screen icon - custom.js-->
							<button type="button" class="full-screen-modal close" aria-hidden="true">
								<i class="icon-fullscreen"></i>
							</button>
							<!--full screen icon - custom.js-->
							<h4 class="modal-title" id="modal-iframe-title"> [lang.lang_edit]</h4>
							<div class="clearfix"></div>
						</div>
						<div class="modal-body">
							<iframe frameborder="0" class="slimScrollBarModal----"></iframe>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal" aria-hidden="true">
								[lang.lang_close]
							</button>
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--WI_IFRAME_MODAL-->
</body>
</html>
